<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gemini AI Clone</title>
    <link rel="stylesheet" href="./styles.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="body-class">
    <div id="left_header_container" class="left-header-container">
      <div class="flex flex-col">
        <div class="w-full">
          <span
            id="left_header"
            class="material-symbols-outlined left-header-icon"
          >
            menu
          </span>
        </div>
        <div class="new-chat">
          <span class="material-symbols-outlined"> add </span>
          <span class="wider_left_header_content">New chat</span>
        </div>
      </div>
      <div class="setting-container">
        <div class="left-header-item">
          <span class="material-symbols-outlined left-header-icon"> help </span>
          <span class="p-[10px] wider_left_header_content">Help</span>
        </div>
        <div class="left-header-item">
          <span class="material-symbols-outlined left-header-icon">
            history
          </span>
          <span class="p-[10px] wider_left_header_content">History</span>
        </div>
        <div class="left-header-item">
          <span class="material-symbols-outlined left-header-icon">
            settings
          </span>
          <span class="p-[10px] wider_left_header_content">Settings</span>
        </div>
      </div>
    </div>

    <div id="right" class="right-container">
      <header class="top-header">
        <div class="left-header">
          <button
            id="dropdownDefaultButton"
            data-dropdown-toggle="dropdown"
            class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
            type="button"
          >
            Gemini 2.0
            <svg
              class="w-2.5 h-2.5 ms-3"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 10 6"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="m1 1 4 4 4-4"
              />
            </svg>
          </button>
        </div>
        <div class="right-header">
          <button class="geminiadvbtn" id="geminiadvbtn">
            Try the All New Gemini
          </button>
          <img
            class="user-img"
            src="https://lh3.googleusercontent.com/ogw/AF2bZyjgcqozcqJBFTRv35a3rlK8lmX-oEibS657CMng3N1nCZM=s32-c-mo"
          />
        </div>
      </header>

      <div class="center-div">
        <div id="displayContainer" class="display-container">
          <h1
            class="mb-4 text-3xl font-extrabold text-gray-900 dark:text-white md:text-5xl lg:text-6xl"
          >
            <span
              class="text-transparent bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-400"
              >Hello Human</span
            >
            üòÅ
          </h1>
          <p
            class="mb-6 text-lg font-normal text-gray-500 lg:text-xl sm:px-16 xl:px-48 dark:text-gray-400"
          >
            What is on your mind right now?
          </p>
          <div>
            <a
              href="#"
              class="block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"
            >
              <h6
                class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"
              >
                Study Vocabulary
              </h6>
            </a>
            <a
              href="#"
              class="block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"
            >
              <h6
                class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"
              >
                IND vs PAK
              </h6>
            </a>
            <a
              href="#"
              class="block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"
            >
              <h6
                class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"
              >
                Fun Facts about Roman Empire
              </h6>
            </a>
          </div>
        </div>
      </div>

      <footer class="footer-container">
        <form id="formElement" action="" class="text-white">
          <span class="footer-search-box">
            <input
              class="search-input"
              type="text"
              name=""
              id="searchBox"
              placeholder="Enter a prompt here"
            />
            <span class="search-icons">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"
                />
              </svg>
              <input type="file" class="hidden" name="" id="inputImage" />
              <svg
                xmlns="http://www.w3.org/2000/svg"
                id="iconInputImageBtn"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"
                />
              </svg>
              <button class="send-button" type="button">
                <svg
                  class="sendbtnsvg"
                  xmlns="http://www.w3.org/2000/svg"
                  height="24px"
                  viewBox="0 -960 960 960"
                  width="24px"
                  fill="#5f6368"
                >
                  <path
                    d="M120-160v-640l760 320-760 320Zm80-120 474-200-474-200v140l240 60-240 60v140Zm0 0v-400 400Z"
                  />
                </svg>
              </button>
            </span>
          </span>
        </form>
      </footer>
    </div>
    <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>

    <script type="module">
      import { GoogleGenerativeAI } from "@google/generative-ai";

      const API_KEY = "AIzaSyAFC7vKwkVP7JGG6w6Wa-1q0-qiyIaBBgk";
      const genAI = new GoogleGenerativeAI(API_KEY);
      let i = 0;

      const searchBox = document.getElementById("searchBox");
      const sendButton = document.querySelector(".send-button");
      const formElement = document.getElementById("formElement");
      const displayContainer = document.getElementById("displayContainer");
      console.log(displayContainer);

      sendButton.addEventListener("click", runCode);
      formElement.addEventListener("submit", function (event) {
        event.preventDefault();
        runCode();
      });

      function stripHTML(html) {
        let doc = new DOMParser().parseFromString(html, "text/html");
        return doc.body.textContent || "";
      }

      async function runCode() {
        const model = await genAI.getGenerativeModel({
          model: "gemini-1.5-flash",
        });

        let userInput = searchBox.value.trim();
        searchBox.value = "";

        if (userInput === "") return;

        const prompt = userInput;

        try {
          const result = await model.generateContent(prompt);
          const response = await result.response;
          const markdownText = await response.text();
          const htmlText = marked.parse(markdownText);
          const plainText = htmlText;

          if (i === 0) {
            displayContainer.innerHTML = "";
          }

          let userProfileContainer = document.createElement("div");
          userProfileContainer.classList.add("user-profile-container");

          let userProfileImg = document.createElement("img");
          userProfileImg.src =
            "https://lh3.googleusercontent.com/ogw/AF2bZyjgcqozcqJBFTRv35a3rlK8lmX-oEibS657CMng3N1nCZM=s32-c-mo";
          userProfileImg.classList.add("user-img");
          userProfileContainer.appendChild(userProfileImg);

          let userInputDiv = document.createElement("div");
          userInputDiv.innerHTML = `<strong>You:</strong> ${userInput}`;

          let responseDiv = document.createElement("div");
          responseDiv.classList.add("response-div");
          responseDiv.innerHTML = `<strong>Gemini:</strong> ${plainText}`;

          displayContainer.appendChild(userProfileContainer);
          displayContainer.appendChild(userInputDiv);
          displayContainer.appendChild(responseDiv);

          i++;
        } catch (error) {
          console.error("Error generating content:", error);
        }
      }
    </script>
  </body>
</html>
